<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrarse</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <link rel="stylesheet" href="Bootstrap/css/bootstrap.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">


    <link rel="stylesheet" href="css/Pedidosty/remixicon.css">

    <link rel="stylesheet" href="css/pedido.css">
    <link rel="stylesheet" href="css/pedido2.css">
</head>

<body class="grid-contenidos">
    <header class="cabes">
        <nav class="navbar navbar-expand-lg navbar-dark" id="prueba">
            <div class="container-fluid">

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ">
                        <li class="nav-item">
                            <a class="nav-link active " href="index.html">Inicio</a>
                        </li>
                        <li class="nav-item" id="venta-item">
                            <a class="nav-link active" aria-current="page" href="#">Venta</a>
                            <!-- submenu -->
                            <div class="submenu">
                                <p>CATEGORÍAS:</p>
                                <ul>
                                    <li><a href="aretes.html">• Aretes</a></li>
                                    <li><a href="anillos.html">• Anillos</a></li>
                                    <li><a href="collares.html">• Collares</a></li>
                                    <li><a href="pulseras.html">• Pulseras</a></li>
                                </ul>
                            </div>

                        </li>
                        <li class="nav-item">
                            <a class="nav-link active " href="">Personalizacion</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active " href="">Nosotros</a>
                            <div class="submenu">
                                <ul>
                                    <li><a href="contactenos.html">• Contáctanos</a></li>
                                    <li><a href="nosotrosh.html">• Nuestra Historia</a></li>
                                </ul>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active " href="produc.html">Mis Pedidos</a>
                        </li>
                    </ul>
                </div>
                <div class="cuadro-logotipo">
                    <a class="logotipo" href="index.html">Carito</a>
                </div>
                <script>
                    document.addEventListener("DOMContentLoaded", function () {
                        // Verificar si existe un dato en el localStorage
                        var nombreUsuario = localStorage.getItem('nombreUsuario');

                        // Obtener el elemento del enlace
                        var enlaceLogin = document.getElementById('enlaceLogin');
                        // Obtener el elemento del texto dentro del enlace
                        var usuarioLogin = document.getElementById('usuarioLogin');
                        // Obtener el elemento del submenú para el login
                        var loginOptions = document.querySelector('.login-options');
                        // Obtener el elemento de la opción "Cerrar Sesión"
                        var cerrarSesionOption = document.getElementById('cerrarSesionOption');

                        // Verificar y actualizar el texto del enlace
                        if (nombreUsuario) {
                            usuarioLogin.textContent = (" ") + nombreUsuario;
                        } else {
                            usuarioLogin.textContent = ' Loguearme';
                            loginOptions.style.display = 'none'; // Ocultar submenú si no hay nombre de usuario
                        }

                        // Agregar un evento de clic a la opción "Cerrar Sesión"
                        cerrarSesionOption.addEventListener('click', function (event) {
                            event.preventDefault(); // Evitar que el enlace redirija

                            // Limpiar el localStorage y ocultar el submenú
                            localStorage.removeItem('nombreUsuario');
                            localStorage.removeItem('idUsuario');
                            loginOptions.style.display = 'none';
                            location.reload();
                        });
                    });

                </script>
                <li class="d-flex" id="login">
                    <div class="cuadro-login">
                        <a href="login.html" id="enlaceLogin" class="nav-link active "><svg viewBox="0 0 24 24"
                                width="50px" height="50px" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <circle cx="12" cy="6" r="4" fill="#000000"></circle>
                                    <ellipse opacity="0.5" cx="12" cy="17" rx="7" ry="4" fill="#000000"></ellipse>
                                </g>
                            </svg>
                            <span id="usuarioLogin"></span></a>
                        <!-- Nuevo submenú para el login -->
                        <div class="login-options">
                            <ul>
                                <li><a href="#">• Perfil</a></li>
                                <li id="cerrarSesionOption"><a href="#">• Cerrar Sesión</a></li>
                            </ul>
                        </div>
                        <!-- <li><a href="#">• Configuración</a></li> -->
                    </div>
                </li>
            </div>
        </nav>
    </header>


    <div class="slog" style="margin-left: 35px;">
        <br><br>
        <h2>SIGUE LA RUTA DE TU BELLEZA</h2>
        <div>JOYAS / PERSONALIZACIÓN / SEG. PEDIDO</div>
        <br>
    </div>
    <div id="contenidoDinamico">
        <div class="navs">
            <br>

            <br><br>
            <img src="" alt="" style="width: 60%; margin-left: 10%; margin-top: -10%;">
        </div>
    </div>
    <article class="form-group cuers">
        <br><br>
        <div class="container">

            <p>
            <h3>Datos Generales del Envío</h3>
            </p>
            <br><br>
            <div class="form-row">
                <div class="col-5 dat">
                    <p> Cliente: </p>
                    <p> Codigo de Entrega:</p>
                    <p> Dirección:</p>
                    <br>
                    <p> Fec. de Pedido:</p>
                    <p> Fec. Entrega:</p>
                </div>

                <div class="col-7">
                    <div class="cliente"></div>
                    <div class="codigoEntrega"></div>
                    <div class="direccion"></div>
                    <div class="fechaPedido"></div>
                    <div class="fechaLlegada"></div>
                </div>
            </div>
        </div>
    </article>

    <aside class="asides">
        <br><br>
        <div class="container">

            <div style="margin-left: 10%;" class="form-row">
                <div class="col-2">
                    <div class="linea-pasando-por-debajo"></div>
                    <p>
                        <br>
                        <br>
                        <img id="ic" class="ic1" src="" width="30px">
                        <br>
                        <img id="ic" class="ic2" src="" width="30px">
                        <br>
                        <img id="ic" class="ic3" src="" width="33px">
                        <br>
                        <img id="ic" class="ic4" src="" width="30px">
                        <br>
                        <img id="ic" class="ic5" src="" width="30px">
                    </p>

                </div>
                <div class="col-10 segui" style="margin-bottom: 20px;">
                    <p>
                    <h3 class="cabz">Estado de Compra</h3>
                    <br>
                    <div class="itemms">
                        <a class="cab" id="cab">Pedido realizado</a>
                        <p class="descri">El Pedido ha sido realizado</p>
                    </div>
                    <br>
                    <div class="itemms">
                        <a class="cab" id="cab">Pedido confirmado</a>
                        <p class="descri">El pedido ha sido confirmado</p>
                    </div>
                    <br>
                    <div class="itemms">
                        <a class="cab" id="cab">En camino</a>
                        <p class="descri">El envío llegará en la fecha estimada</p>
                    </div>
                    <br>
                    <div class="itemms">
                        <a class="cab" id="cab">En Entrega</a>
                        <p class="descri">El envío llegó a su destino</p>
                    </div>
                    <br>
                    <div class="itemms">
                        <a class="cab" id="cab">Entregado</a>
                        <p class="descri"></p>
                    </div>
                    </p>
                    <br><br>

                </div>
            </div>
        </div>
        <br><br><br><br><br>

    </aside>
    <!-- img/pedido/2.png
    img/pedido/3n.png
    img/pedido/4n.png
    img/pedido/5n.png -->

    <script>
        // Función para obtener los datos de un pedido por su ID
        function obtenerDatosPedidoPorId() {
            // Obtener la URL actual
            const urlParams = new URLSearchParams(window.location.search);

            // Obtener el valor del parámetro 'id' de la URL
            const idPedido = urlParams.get('id');
            console.log('ID del pedido:', idPedido);
            // Verificar si el ID del pedido está presente en la URL
            if (idPedido) {
                // Hacer la solicitud HTTP GET al endpoint correspondiente con el ID obtenido
                // Puedes usar el valor de idPedido en tu lógica para obtener los datos del pedido
                console.log('ID del pedido:', idPedido);
            } else {
                console.error('ID del pedido no encontrado en la URL');
            }

            fetch(`/pedidos/${idPedido}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Error al obtener el pedido con ID ${idPedido}`);
                    }
                    return response.json();
                })
                .then(pedido => {
                    // Puedes acceder a los campos específicos que necesitas
                    const {
                        nombreCliente,
                        codigoEntrega,
                        direccionCliente,
                        fechaRegistro,
                        fechaAproximada,
                        estadoPedido,
                        imagen,
                        nombrePedido,
                        cantidad,
                        descripcion,
                        medidaProducto,
                        precio
                    } = pedido;

                    // Actualiza los elementos del DOM con los nuevos datos
                    // document.getElementById('nombreCliente').innerText = nombreCliente;
                    // document.getElementById('codigoEntrega').innerText = codigoEntrega;
                    // document.getElementById('direccionCliente').innerText = direccionCliente;
                    // document.getElementById('fechaRegistro').innerText = fechaRegistro;
                    // document.getElementById('fechaAproximada').innerText = fechaAproximada;
                    // document.getElementById('imagen').innerText = imagen;
                    // document.getElementById('nombrePedido').innerText = nombrePedido;
                    // document.getElementById('cantidad').innerText = cantidad + "unidades.";
                    // document.getElementById('descripcion').innerText = descripcion;
                    // document.getElementById('medidaProducto').innerText = medidaProducto + " cm.";
                    // document.getElementById('precio').innerText = "S/. " + precio;
                    // ... otros campos
                    // Obtén el elemento div donde se mostrarán las imágenes
                    const imagenesContainer = document.getElementById('imagenesContainer');

                    // Define un objeto que mapea los estados a las imágenes correspondientes
                    const imagenesPorEstado = {
                        "Pedido realizado": ["1.png", "2n.png", "3n.png", "4n.png", "5n.png"],
                        "Pedido confirmado": ["1.png", "2.png", "3n.png", "4n.png", "5n.png"],
                        "En camino": ["1.png", "2.png", "3.png", "4n.png", "5n.png"],
                        "En Entrega": ["1.png", "2.png", "3.png", "4.png", "5n.png"],
                        "Entregado": ["1.png", "2.png", "3.png", "4.png", "5.png"]
                    };
                    // Obtiene las imágenes correspondientes al estado actual del pedido
                    const imagenesMostradas = imagenesPorEstado[estadoPedido] || [];

                    // Muestra información en la consola para depuración
                    console.log("Estado del pedido:", estadoPedido);
                    console.log("Imágenes a mostrar:", imagenesMostradas);
                    const contenconten = "img/pedido/" + (imagenesMostradas[1] || '');
                    console.log("contenido que deberia salir:", contenconten);
                    console.log("contenido que deberia salir:", nombreCliente);
                    console.log("contenido que deberia salir:", codigoEntrega);
                    console.log("contenido que deberia salir:", direccionCliente);
                    console.log("contenido que deberia salir:", fechaRegistro);
                    console.log("contenido que deberia salir:", fechaAproximada);

                    // Actualiza el contenido de las imágenes en el contenedor
                    document.querySelector('.ic1').src = "img/pedido/" + (imagenesMostradas[0] || '');
                    document.querySelector('.ic2').src = "img/pedido/" + (imagenesMostradas[1] || '');
                    document.querySelector('.ic3').src = "img/pedido/" + (imagenesMostradas[2] || '');
                    document.querySelector('.ic4').src = "img/pedido/" + (imagenesMostradas[3] || '');
                    document.querySelector('.ic5').src = "img/pedido/" + (imagenesMostradas[4] || '');

                    let codigo = "------";

                    if (codigoEntrega !== null) {
                        codigo = codigoEntrega;
                    }

                    document.querySelector('.cliente').textContent = nombreCliente;
                    document.querySelector('.codigoEntrega').textContent = codigo;
                    document.querySelector('.direccion').textContent = direccionCliente;
                    document.querySelector('.fechaPedido').textContent = fechaRegistro;
                    document.querySelector('.fechaLlegada').textContent = fechaAproximada;
                    document.querySelector('.navs img').src = imagen;
                })

                .catch(error => console.error(error));
        }

        // Llamada a la función cuando la página se haya cargado completamente
        document.addEventListener("DOMContentLoaded", function () {
            obtenerDatosPedidoPorId();
        });
    </script>





    <footer class="piess">
        <div class="footer-content">
            <div class="logotipo-footer">
                <a class="logotipo" href="index.html">Carito</a>
            </div>
            <div class="derecho-reservado">
                Todos los derechos reservados ©
            </div>
        </div>
        <div class="grupo">
            Grupo 03
        </div>
    </footer>
    <script src="js/personaliz.js"></script>
</body>

</html>